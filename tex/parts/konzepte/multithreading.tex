\introduces{von Multithreading und Parallelisierung}{multithreading}

Bisher sind uns nur Programme geläufig, welche sequentiell (das heißt nacheinander) ablaufen. In der Praxis ist dies in vielen Fällen nützlich, es gibt aber ebenso viele Fälle, in denen mehrere Dinge parallel ablaufen müssen (beispielsweise möchte man nicht immer die Musik pausieren müssen, nur um einen Absatz im Skript zu lesen).

Vor ähnliche Problematiken werden wir gestellt, wenn unser Programm irgendetwas im Hintergrund abarbeiten muss (beispielsweise eine große Rechenaufgabe wir Wurzelziehen). Hierbei unterstützt uns Multithreading, was von vielen Sprachen in sehr unterschiedlichen Wegen implementiert wird. Damit ist es möglich, Dinge auszulagern und im Hintergrund laufen zu lassen.

\subsection{Thread}
	Ein \textit{Thread} bezeichnet einen Ausführungsstrang unserer Anwendung, welcher \textit{parallel}, also zeitgleich \footnote{\enquote{zeitgleich} ist hier tatsächlich etwas hoch gegriffen, das Betriebssystem und die CPU simulieren dies nur sehr gut.}, zu anderen Ausführungssträngen ausgeführt wird.
	
	Gegenüber dem Betriebssystem tritt unsere Anwendung dennoch als ein Prozess (eine Applikation) auf, weshalb man bei Threads auch von \textit{leichtgewichtigen Prozessen} spricht.
	
	Ein Thread kann gestartet werden und läuft ab diesem Moment asynchron (zeitlich unabhängig) zu anderen Threads. Zum stoppen eines Threads kann dieser wieder mit anderen Threads synchronisiert werden (join) oder auch einfach gestoppt (terminiert) werden.
% end

\subsection{Parallelisierung}
	\subsubsection{Echte Parallelität}
		Multithreading kann uns helfen, eine komplexe Rechenaufgabe drastisch zu beschleunigen, in dem wir mehrere Operationen zeitgleich durchführen. Hierbei ist zu beachten, dass uns dies nur etwas nützt, wenn unsere Threads \textit{echtparallel} ablaufen. Das bedeutet, dass die Operationen sogar auf der Hardware (der CPU) zeitgleich ausgeführt werden und die Parallelität nicht nur von dem Betriebssystem/der CPU simuliert wird. Konkret heißt das, wir dürfen maximal \( \text{Kernanzahl} - 1 \) Threads starten, damit noch eine Beschleunigung eintritt.
	% end
	
	\subsubsection{Simulierte Parallelität (Scheduling)}
		Läuft unser Programm auf einer Maschine mit einem Kern und es ist somit keine echte Parallelität möglich, hilft uns Multithreading nicht, um Rechenoperationen zu beschleunigen.
		
		Allerdings ist uns geholfen, wenn beispielsweise ein Thread die GUI aufbaut, ein anderer Thread die Verbindung zu einer Datenbank und ein dritter Thread die Benutzereingaben entgegen nimmt. \\ Auch kann dies sinnvoll sein, wenn ein Thread mit dem Nutzer interagiert und ein anderer auf Änderungen einer Datei wartet, um den Nutzer darüber zu informieren. \\ Diese Kette an Beispielen lässt sich ewig fortsetzen und wir sehen, dass Multithreading sehr viele unterschiedliche Anwendungsgebiete hat.
		
		Diese Form der Parallelität, beziehungsweise der Nutzung selbiger, ist die Häufigste in Anwenderprogrammen, die eben keine komplexen Berechnungen durchführen.
	% end
% end

\subsection{Beispiel: Window Manager}
	Ein Ort, an dem wir schon mit Multithreading in Kontakt gekommen sind, ist der Window Manager des Betriebssystems. Dieser verwaltet alle offenen Programme (mit GUI), Benutzereingaben, Bildschirme (einen oder mehrere), \dots.
	
	Auch hierbei ist Multithreading sehr wichtig, da wir nicht wollen, dass ein Programm pausiert, sobald wir mit der Maus den Fokus zu einem anderen Programm wechseln. Damit wäre es zum Beispiel nicht möglich, zeitgleich Musik zu hören und dieses Skript zu lesen.
	
	Dabei kann es sich je nach Implementierung sogar um echte Parallelität handeln, wenn die CPU des Computers mehrere Kerne hat. Meistens laufen jedoch so viele Programme parallel, dass die Kerne nicht ausreichen und die Parallelität somit simuliert wird (Scheduling).
% end
